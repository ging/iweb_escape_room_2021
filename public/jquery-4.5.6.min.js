!function(){function addNextBtn(t){0===$(".actions .btn-success").length&&$(".actions").append('<a href="/#/'+t.toString().hashCode()+'"><button class="btn btn-success">SIGUIENTE</button></a>')}function unimportantFunction(t){addNextBtn(2),t||(console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"),console.log("Has entrado en el modo avanzado de la aplicación. Ten cuidado con lo que haces a partir de ahora!. Puedes darle al botón de siguiente para acceder a la interfaz de desactivación."))}fetch=window.fetchOriginal,window.fetch=window.fetchOriginal,window.routerCallback=function(){};var i=[];$(function(){var o=new ESCAPP({endpoint:"https://escapp.dit.upm.es/api/escapeRooms/99",localStorageKey:"escapp",onNewErStateCallback:async function onNewErStateCallback(t){var e=$.grep(t.puzzlesSolved,function(t){return-1==$.inArray(t,i)});if(e&&e.length){var n,a=Math.max(...e);for(n in e)switch(e[n]){case 2:try{2===a&&(window.location.href="/#/"+"1".hashCode()),unimportantFunction(!0)}catch(t){console.error(t)}break;case 3:try{3===a&&(window.location.href="/#/"+"2".hashCode()),addNextBtn(3),$(".next2").attr("style","display:block !important"),$(".next2-w").attr("style","display:none !important")}catch(t){console.error(t)}break;case 4:try{4===a&&(window.location.href="/#/"+"3".hashCode()),addNextBtn(4),$(".next3").attr("style","display:block !important"),$(".next3-w").attr("style","display:none !important")}catch(t){}break;case 5:try{5===a&&(window.location.href="/#/"+"4".hashCode()),o.displayCompletionDialog()}catch(t){}}}i=t.puzzlesSolved},imagesPath:"/escapp/images/",I18n:{locale:"es",defaultLocale:"es",availableLocales:["es","en"]},browserRestrictions:{chrome:">20.1.1432"},browserRestrictionsDefault:!0,autovalidate:!1,appPuzzleIds:[1,2,3,4,5],requiredPuzzlesIds:[],forceValidation:!0});function isSuperado(t){return-1!==o.getNewestState().puzzlesSolved.indexOf(t)}function getSol(t){return o.getNewestState().puzzleData[t].solution}function isNotSuperadoButAllPreviousAre(t){return o.getNewestState().puzzlesSolved.length+1===t}window.routerCallback=function(t){try{var e=parseInt(t.url.toString().substring(1,5).unhashCode()),n=Math.max.apply(null,o.getNewestState().puzzlesSolved);n<{1:0,2:2,3:3,4:4}[e]&&(window.location.href="/#/"+{1:"1",2:"2",3:"3",4:"4",5:"4"}[n].hashCode()),1==e&&isSuperado(2)&&unimportantFunction(!0)}catch(t){}},window.routerCallback({url:window.location.hash.substring(1,window.location.hash.length)}),o.validate(function(t){var a;i=o.getNewestState().puzzlesSolved||[],t&&(isSuperado(1)||o.submitPuzzle(1,"Screen1",{},function(){}),window.sos=window.SOS=function(){if(isSuperado(2))try{0<$("#screen1").length&&unimportantFunction()}catch(t){unimportantFunction()}else isNotSuperadoButAllPreviousAre(2)&&o.submitPuzzle(2,"Screen2",{},function(t){if(t)try{0<$("#screen1").length&&unimportantFunction()}catch(t){unimportantFunction()}})}.bind(fetch,window.fetch),a=[],$(document).on("click",".bomb-item .switch",function(t){try{var e=parseInt(this.closest(".bomb-item").id.split("bomb-item-")[1],10),n=a.indexOf(e);-1==n?a.push(e):a.splice(n,1),4===a.length&&(isNotSuperadoButAllPreviousAre(3)?o.submitPuzzle(3,a.join(","),{},function(t){try{t?(addNextBtn(3),$(".next2").attr("style","display:block !important"),$(".next2-w").attr("style","display:none !important")):($(".next2").attr("style","display:none !important"),$(".next2-w").attr("style","display:block !important"))}catch(t){console.error(t)}}):isSuperado(3)&&getSol(3)===a.join(",")?(addNextBtn(3),$(".next2").attr("style","display:block !important"),$(".next2-w").attr("style","display:none !important")):($(".next2").attr("style","display:none !important"),$(".next2-w").attr("style","display:block !important")))}catch(t){console.error(t)}}),$(document).on("keyup","#nativeInput",function callbackP4(e){try{4===e.target.value.length?isNotSuperadoButAllPreviousAre(4)?o.submitPuzzle(4,e.target.value,{},function(t){t?(addNextBtn(4),$(e.target).attr("disabled",!0),$(".next3").attr("style","display:block !important"),$(".next3-w").attr("style","display:none !important")):($(".next3").attr("style","display:none !important"),$(".next3-w").attr("style","display:block !important"))}):isSuperado(4)&&getSol(4)==e.target.value?(addNextBtn(4),$(".next3").attr("style","display:block !important"),$(".next3-w").attr("style","display:none !important"),$(e.target).attr("disabled",!0)):($(".next3").attr("style","display:none !important"),$(".next3-w").attr("style","display:block !important")):($(".next3").attr("style","display:none !important"),$(".next3-w").attr("style","display:none !important"))}catch(t){console.error(t)}}),$(document).on("keyup","#inputTemperature",function callbackP5(e){try{4===e.target.value.length&&(isNotSuperadoButAllPreviousAre(5)?o.submitPuzzle(5,e.target.value,{},function(t){t&&($(e.target).attr("disabled",!0),o.displayCompletionDialog())}):isSuperado(5)&&getSol(5)==e.target.value&&($(e.target).attr("disabled",!0),o.displayCompletionDialog()))}catch(t){console.error(t)}}))}),window._Fetch.use(),window.fetch=window._Fetch,fetch=window.fetch,window.fetch.addRoute("http://bomb.upm.es/temperature",{get:{response:{msg:"You are not using the right HTTP method"},expect:{status:405,statusText:"Method not allowed"},wait:1e3},post:{response:{code:"ODkxMw==".unhashCode()}}}),window.fetch.addRoute("http://bomb.upm.es/temperature_",{get:{response:{msg:"You are not using the right HTTP method"},expect:{status:405,statusText:"Method not allowed"},wait:1e3},post:{response:{msg:"Wrong body content"}}})}.bind(fetch,window.fetch))}();